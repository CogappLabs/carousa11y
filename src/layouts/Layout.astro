---
interface Props {
  title: string
  description?: string
  ogImage?: string
}

const {
  title,
  description = 'Compare accessibility scores and features of popular carousel libraries. Find the most accessible carousel for your project.',
  ogImage = '/og-image.png'
} = Astro.props

const canonicalURL = new URL(Astro.url.pathname, Astro.site || 'https://example.com')
---

<!doctype html>
<html lang="en" class="bg-stone-100 text-stone-900">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}/favicon.svg`} />
    <link rel="canonical" href={canonicalURL} />

    <title>{title}</title>
    <meta name="description" content={description} />

    <!-- Open Graph / Social -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
  </head>
  <body class="m-0 p-0 font-sans leading-relaxed">
    <a href="#main" class="skip-link">Skip to main content</a>
    <slot />
  </body>
</html>

<style is:global>
  @import "tailwindcss";
  @import "../css/utilities.css";
  @import "../css/prose.css";
  /* Carousel library overrides - required due to fixed class names */
  @import "../css/swiper.css";
  @import "../css/splide.css";
  @import "../css/glide.css";
  @import "../css/keen-slider.css";
  @import "../css/tiny-slider.css";
  @import "../css/flickity.css";
  @import "../css/flicking.css";
  @import "../css/siema.css";
  @import "../css/react.css";

  .carousel-section {
    @apply bg-white rounded-lg p-8 mb-8 shadow-md;
    h2 {
      @apply m-0 mb-6 text-2xl border-b-2 border-stone-200 pb-2;
    }
    .score {
      @apply text-sm font-normal text-stone-500;
    }
    img {
      @apply w-full h-52 object-cover rounded;
    }
    h3 {
      @apply mt-4 mb-2 text-xl;
    }
    p {
      @apply m-0 mb-3 text-stone-600;
    }
    a {
      @apply text-stone-700 underline underline-offset-2 hover:text-stone-900;
      @apply focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 focus:rounded-sm;
    }
  }

  /* Skeleton loading for carousels before JS initializes */
  .carousel-loading {
    img {
      @apply bg-stone-200 animate-pulse;
      /* Hide actual image until loaded */
      color: transparent;
    }
    h3, p, a {
      @apply bg-stone-200 text-transparent rounded animate-pulse select-none;
    }
  }

  .carousel-ready {
    img, h3, p, a {
      @apply bg-transparent animate-none;
    }
    h3, p, a {
      @apply text-inherit;
    }
  }

  .toggle-btn {
    @apply px-4 py-2 text-sm font-medium border-2 border-stone-300 bg-white text-stone-600 cursor-pointer;
    @apply hover:border-stone-400 hover:bg-stone-50;
    @apply focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2;
    &:first-child {
      @apply rounded-l-md;
    }
    &:last-child {
      @apply rounded-r-md;
    }
    &.active {
      @apply bg-stone-800 text-white border-stone-800;
    }
  }


  #axe-results {
    @apply bg-white text-stone-900 mt-6 mx-auto p-6 rounded-lg max-w-4xl text-left;
    &:empty {
      @apply hidden;
    }
    h2,
    h3 {
      @apply mt-0;
    }
    table {
      @apply w-full border-collapse my-4;
    }
    th,
    td {
      @apply py-3 px-3 text-left border-b border-stone-200;
    }
    th {
      @apply bg-stone-100 font-semibold;
    }
    details {
      @apply my-2 p-3 bg-stone-50 rounded;
    }
    summary {
      @apply cursor-pointer font-medium;
    }
    code {
      @apply bg-stone-200 px-1 py-0.5 rounded text-sm;
    }
    a {
      @apply text-amber-700 underline underline-offset-2 hover:text-amber-900;
      @apply focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 focus:rounded-sm;
    }
    .pass {
      @apply text-green-700 font-semibold;
    }
    .error {
      @apply text-red-700 font-semibold;
    }
    .impact-critical {
      @apply bg-red-700 text-white px-2 py-0.5 rounded text-xs font-semibold uppercase;
    }
    .impact-serious {
      @apply bg-orange-700 text-white px-2 py-0.5 rounded text-xs font-semibold uppercase;
    }
    .impact-moderate {
      @apply bg-amber-500 text-stone-900 px-2 py-0.5 rounded text-xs font-semibold uppercase;
    }
    .impact-minor {
      @apply bg-stone-400 text-white px-2 py-0.5 rounded text-xs font-semibold uppercase;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>
